!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,u=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,u=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw u}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collection=[],this.isAnimate=!1,window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}var e,n,u;return e=t,(n=[{key:"start",value:function(){var t=this;return this.isAnimate=!0,new window.Promise(function(e,n){t._scheduleAnimaFrame(e,n)})}},{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"==typeof e.cb&&(e.pivotPtBezier=this._getPivotPtBezier(e.timing),e.start=window.performance.now(),this.collection.push(function(n){return t._stepFrame(n,e)}),this)}},{key:"_animaFrame",value:function(t,e,n){for(var r in this.collection)this.collection.splice(0,1)[0](n);this.collection.length>0?this._scheduleAnimaFrame(t,e):t(!0)}},{key:"_scheduleAnimaFrame",value:function(t,e){return window.requestAnimationFrame(this._animaFrame.bind(this,t,e))}},{key:"_stepFrame",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t=t||window.performance.now())-n.start;r<0?r=0:r>n.duration&&(r=n.duration);var i=this._getPercentTime(n.duration,r)/100,u=this._getPointBezier(n.pivotPtBezier,i)[1];n.cb(u),r<n.duration&&this.collection.push(function(t){return e._stepFrame(t,n)})}},{key:"_getPivotPtBezier",value:function(t){if(Array.isArray(t))return t;switch(t){case"ease-in":return[[0,0],[.42,0],[1,1],[1,1]];case"ease-out":case"ease-in-out":return[[0,0],[0,0],[.58,1],[1,1]];default:return[[0,0],[1,1]]}}},{key:"_getPercentTime",value:function(t,e){return e/t*100}},{key:"_getPointBezier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.length<2)return t;for(var n=[],r=1;r<t.length;r++){var i=t[r-1],u=t[r],a=100*e;n.push(this._getPointOnVecByPercent(i,u,a))}return n.length>1?this._getPointBezier(n,e):n[0]}},{key:"_getLenVec",value:function(t,e){var n=r(t,2),i=n[0],u=n[1],a=r(e,2),o=a[0],s=a[1];return Math.sqrt(Math.pow(i-o,2)+Math.pow(u-s,2))}},{key:"_getDistanceCovered",value:function(t,e){return t/100*e}},{key:"_getPointOnVecByPercent",value:function(t,e,n){var i=r(t,2),u=i[0],a=i[1],o=r(e,2),s=o[0],c=o[1],h=this._getLenVec([u,a],[s,c]),l=this._getDistanceCovered(h,n)/h||0;return[u+(s-u)*l,a+(c-a)*l]}}])&&i(e.prototype,n),u&&i(e,u),t}();function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={weight:0};return t[0]===t[1]&&t[1]===t[2]?(e.val=t[1],e.weight=3):t[0]===t[1]||t[1]===t[2]?(e.val=t[1],e.weight=2):t.some(function(t){return 7===t})&&(e.val=7,e.weight=1),e}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}for(var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ctx,r=e.x,i=e.y,u=e.w,a=e.h,o=e.values,s=void 0===o?[]:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=r,this.w=u,this.y=i,this.h=a,this.ctx=n,this.isVictory=!1,this._values=s,this._seekValue=0,this._valueOffsetY=0,this._currentDeg=0,this._degFromOneValue=360/this._values.length}var e,n,r;return e=t,(n=[{key:"setting",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in t)"function"!=typeof this[e]&&e in this&&(this[e]=t[e]);return this}},{key:"draw",value:function(){return this.ctx.save(),this.ctx.rect(this.x,this.y,this.w,this.h),this.ctx.stroke(),this.ctx.clip(),this._drawValue(),this.ctx.restore(),this}},{key:"turn",value:function(t){if(t<0)return this;this._currentDeg=0;var e=t*this._degFromOneValue;return(this._currentDeg+=e)>=360&&(this._currentDeg=this._currentDeg%360),this._seekValue=~~(this._currentDeg/this._degFromOneValue),this._valueOffsetY=this.h/this._degFromOneValue*this._currentDeg,this._currentDeg>=this._degFromOneValue&&(this._valueOffsetY-=this.h*this._seekValue),this}},{key:"_drawValue",value:function(){var t={maxWidth:this.w,text:this.currentValue,x:this.x+this.w/2,y:this.y+this.h/2+.075*this.h+this._valueOffsetY};this._showText(t),t.text=this.nextValue,t.y-=this.h,this._showText(t)}},{key:"_showText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.text,n=t.x,r=t.y,i=t.maxWidth;this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.font="bold ".concat(this.h,"px monospace"),this.ctx.shadowColor="black",this.ctx.shadowBlur=15,this.ctx.lineWidth=5,this.ctx.strokeText(e,n,r,i),this.isVictory&&(this.ctx.shadowBlur=0,this.ctx.fillStyle="white",this.ctx.fillText(e,n,r,i))}},{key:"currentValue",get:function(){return this._values[this._seekValue]}},{key:"nextValue",get:function(){return this._seekValue+1>=this._values.length?this._values[0]:this._values[this._seekValue+1]}}])&&o(e.prototype,n),r&&o(e,r),t}(),c=[],h=0;h<=7;h++)c.push(h);for(var l=[],f=0;f<3;f++)l.push(new s({values:c}));var d={cash:100,bet:10,countDrum:3,defCash:100,values:c,drums:l};Object.defineProperty(d,"turns",{get:function(){return this._turns},set:function(t){var e,n,r=c.length;this._turns=[];for(var i=0;i<this.countDrum;i++){var u=(e=1,n=r-1,~~(Math.random()*(n-e+1))+e);this._turns.push(t*r+u)}return!0}});var v=d;function m(t,e){t.width=t.parentNode.clientWidth;for(var n=0;n<e.countDrum;n++)e.drums[n].draw()}var g=function(t,e){var n=new u;e.turns=3;var r=function(t,e){for(var n=0,r=1500,i=function(i){n+=r,r*=.9,t.drums[i].isVictory=!1,e.add({duration:n,timing:"ease-out",cb:function(e){var n=t.turns[i]*e;t.drums[i].turn(n)}})},u=0;u<t.countDrum;u++)i(u);return n}(e,n);return n.add({duration:r,cb:function(){return m(t,e)}}),n.start().then(function(){for(var t=[],n=0;n<e.countDrum;n++)t.push(e.drums[n].currentValue);var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=a(t);if(n.weight<1)return 0;var r={1:{7:10},2:{1:100,2:200,3:300,4:400,5:500,6:750,7:1e3},3:{1:2500,2:5e3,3:15e3,4:25e3,5:5e4,6:75e3,7:1e6}};return r[n.weight]&&r[n.weight][n.val]?r[n.weight][n.val]*e*.1:0}(t);if(0===r)return!1;e.cash+=r;var i=a(t);return e.drums.forEach(function(t){t.currentValue===i.val&&(t.isVictory=!0)}),!0})};for(var w={start:document.querySelector(".btn--start"),cashAmount:document.getElementById("cashAmount"),betAmount:document.getElementById("betAmount")},y=document.getElementById("canva"),_=y.getContext("2d"),p=0;p<v.countDrum;p++)v.drums[p].setting({ctx:_});w.cashAmount.innerHTML=v.cash,w.betAmount.innerHTML=v.bet,window.onresize=function(){var t,e,n;e=v,function(t){t.width=t.parentNode.clientWidth,t.height=t.width/5*3}(t=y),function(t,e){var n=t.width,r=t.height,i={w:n/(e.countDrum+1),h:.4*r,y:.4*r};i.x=i.w/2;for(var u=0;u<e.countDrum;u++)e.drums[u].setting(i),i.x+=i.w}(t,e),m(t,e),n=y.width/25,w.start.style.fontSize=n+"px",w.start.style.padding="".concat(n/4,"px ").concat(2*n,"px"),w.start.style.left=y.width/2-w.start.clientWidth/2+"px"},window.onresize(),w.start.onclick=function(){w.start.disabled=!0,0==v.cash&&(v.cash=v.defCash),w.cashAmount.innerHTML=v.cash-=v.bet,g(y,v).then(function(t){t&&(m(y,v),w.cashAmount.innerHTML=v.cash),w.start.disabled=!1})}}]);